<!--_meta 作为公共模版分离出去-->
<!DOCTYPE HTML>
<html>

<head>
	<meta charset="utf-8">
	<meta name="renderer" content="webkit|ie-comp|ie-stand">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
	<meta http-equiv="Cache-Control" content="no-siteapp" />
	<link rel="Bookmark" href="favicon.ico">
	<link rel="Shortcut Icon" href="favicon.ico" />

	<link rel="stylesheet" type="text/css" href="static/h-ui/css/H-ui.min.css" />
	<link rel="stylesheet" type="text/css" href="static/h-ui.admin/css/H-ui.admin.css" />
	<link rel="stylesheet" type="text/css" href="lib/Hui-iconfont/1.0.8/iconfont.css" />
	<link rel="stylesheet" type="text/css" href="static/h-ui.admin/skin/default/skin.css" id="skin" />
	<link rel="stylesheet" type="text/css" href="static/h-ui.admin/css/style.css" />


	<link href="lib/webuploader/0.1.5/webuploader.css" rel="stylesheet" type="text/css" />
	<style>
		#tmpimg{
		width: 200px;
        height: 100px;
	}
</style>
</head>

<body>
	<div class="page-container">
		<form action="" method="post" class="form form-horizontal" id="form-article-add">
			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>姓名：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<input type="text" class="input-text" value="" placeholder="" id="name" name="">
				</div>
			</div>

			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>学号：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<input type="text" class="input-text" value="" placeholder="" id="xuehao" name="">
				</div>
			</div>
			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>密码：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<input type="text" class="input-text" value="" placeholder="" id="ps" name="">
				</div>
			</div>

			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-2">邮箱：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<input type="text" class="input-text" value="" placeholder="" id="email" name="">
				</div>
			</div>
			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-2">外语水平：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<input type="text" class="input-text" value="" placeholder="" id="language" name="">
				</div>
			</div>

			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-2">专业：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<input type="text" name="" id="major" placeholder="" value="" class="input-text">
				</div>
			</div>
			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-2">求职意向：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<input type="text" name="" id="job" placeholder="" value="" class="input-text">
				</div>
			</div>
			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-2">工作城市：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<input type="text" name="" id="city" placeholder="" value="" class="input-text">
				</div>
			</div>
			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-2">理想薪资：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<input type="text" name="" id="like" placeholder="" value="" class="input-text">
				</div>
			</div>

			<div class="row cl">
				<label class="form-label col-xs-4 col-sm-2">学生照片：</label>
				<div class="formControls col-xs-8 col-sm-9">
					<div class="uploader-thum-container">
						<form enctype="multipart/form-data" method="post">
							<input type="file" name='image' id="imagelist">
						</form>
						<img src="" id="tmpimg">
						<button id='filebtn'> 上传</button>
					</div>
				</div>
			</div>

			<div class="row cl">
				<div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-2">

					<input id="addbtn" class="btn btn-primary radius" type="button" value="提交">
					<button onClick="layer_close()" class="btn btn-default radius" type="button">&nbsp;&nbsp;取消&nbsp;&nbsp;</button>
				</div>
			</div>

		</form>
	</div>

	<!--_footer 作为公共模版分离出去-->
	<script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script>
	<script type="text/javascript" src="lib/layer/2.4/layer.js"></script>
	<script type="text/javascript" src="static/h-ui/js/H-ui.js"></script>
	<script type="text/javascript" src="static/h-ui.admin/js/H-ui.admin.page.js"></script>
	<!--/_footer /作为公共模版分离出去-->

	<!--请在下方写此页面业务相关的脚本-->
	<script type="text/javascript" src="lib/jquery.validation/1.14.0/jquery.validate.js"></script>
	<script type="text/javascript" src="lib/jquery.validation/1.14.0/validate-methods.js"></script>
	<script type="text/javascript" src="lib/jquery.validation/1.14.0/messages_zh.js"></script>
	<script type="text/javascript" src="lib/webuploader/0.1.5/webuploader.min.js"></script>
	<script type="text/javascript" src="lib/ueditor/1.4.3/ueditor.config.js"></script>
	<script type="text/javascript" src="lib/ueditor/1.4.3/ueditor.all.min.js"> </script>
	<script type="text/javascript" src="lib/ueditor/1.4.3/lang/zh-cn/zh-cn.js"></script>
	<script type="text/javascript">
		$(function () {
			var uploaded=false//图片没有上传
			let OL_Action_Root = "http://localhost:9000"
			//添加学生
			function addstuder() {
				var studerdata = {
					name: $('#name').val(),
					xuehao: $('#xuehao').val(),
					mima: $('#ps').val(),
					email: $('#email').val(),
					language: $('#language').val(),
					major: $('#major').val(),
					job: $('#job').val(),
					like: $('#like').val(),
					city: $('#city').val()
				}
				console.log(studerdata)
				$.post(OL_Action_Root + "/api/studer/studer", studerdata, function (res) {
					//  console.log(res)
					if (res.err == 0) {
						window.location = 'http://localhost:9000/admin.html'
					} else {
						alert(res.msg)
					}
				})

			}
			$('#addbtn').on('click', addstuder)
			//图片
			function Req_ajax() {

				console.log($("#imagelist")[0].files)
				var formData = new FormData()//创建
				console.log(formData)
				// formData.append("name",'wangyi');

				// console.log(formData.get('name'))//通过get获取formdata 值
				formData.append("test", $("#imagelist")[0].files[0])
				console.log(formData.get("test"))
				$.ajax({
					url: OL_Action_Root + '/api/upload/img',
					type: 'POST',
					data: formData,
					cache: false,
					contentType: false,
					processData: false,
					success: function (data) {
						if (data.err == 0) {
							$('img').attr('src', 'http://127.0.0.1:9000/' + data.path)
							uploaded = data.path
						}
					},
					error: function (jqXHR, textStatus, errorThrown) {
						document.getElementById("status").innerHTML = "<span style='color:#EF0000'>连接不到服务器，请检查网络！</span>";
					}
				});
			}
			$('#filebtn').on('click', Req_ajax)
		})





	</script>
</body>

</html>